# YouTube AI 助手系統架構

## 系統概述

YouTube AI 助手是一個能夠解析 YouTube 視頻字幕、總結內容並提供基於視頻內容的互動式對話功能的系統。該系統使用 LangGraph 和 Streamlit 構建，能夠為用戶提供深入理解視頻內容的體驗。

## 系統目標

1. 解析 YouTube 視頻的字幕
2. 總結視頻內容
3. 提供字幕原文與翻譯的對照
4. 讓用戶能夠與基於視頻內容的 AI 助手進行對話
5. 提供友好的用戶界面

## 系統架構

系統採用模塊化設計，分為以下幾個主要組件：

### 1. 前端界面 (Streamlit)

- 提供用戶輸入 YouTube 視頻 URL 的界面
- 顯示視頻資訊、字幕和總結內容
- 支持用戶與 AI 助手進行對話
- 提供語言切換功能
- 顯示處理進度和狀態

### 2. YouTube 字幕提取模塊

- 使用 YouTube Transcript API 提取視頻字幕
- 支持多語言字幕提取
- 處理字幕格式化和清理
- 錯誤處理和回退機制

### 3. 內容處理模塊

- 將字幕文本分段處理
- 使用向量數據庫存儲處理後的字幕段落
- 提供字幕搜索和檢索功能

### 4. 翻譯模塊

- 使用 LLM 提供高質量翻譯
- 將原始字幕翻譯成中文
- 保持字幕時間戳對應關係
- 提供原文與翻譯的對照顯示

### 5. 內容總結模塊

- 基於字幕內容生成視頻摘要
- 提取視頻關鍵點和主要觀點
- 生成結構化的視頻內容總結

### 6. 對話助手模塊 (LangGraph)

- 構建基於視頻內容的知識圖譜
- 使用 RAG (檢索增強生成) 技術回答用戶問題
- 維護對話上下文和歷史
- 提供個性化回應和解釋

### 7. 數據存儲和緩存

- 使用向量數據庫存儲字幕段落的嵌入表示
- 緩存處理結果以提高響應速度
- 儲存用戶會話狀態

## 技術堆棧

- **Python**: 主要開發語言
- **LangGraph 0.3.21**: 用於構建對話代理和知識圖譜
- **Streamlit 1.43.1**: 用於構建用戶界面
- **YouTube Transcript API**: 用於提取 YouTube 視頻字幕
- **FAISS/Chroma**: 向量數據庫，用於高效相似性搜索
- **大型語言模型** (例如 OpenAI GPT、Anthropic Claude 等): 用於內容理解、總結和對話生成

## 數據流

1. 用戶通過 Streamlit 界面輸入 YouTube 視頻 URL
2. 系統提取視頻字幕和元數據
3. 字幕內容被處理並存儲在向量數據庫中
4. 系統生成視頻內容總結和翻譯
5. 用戶可以查看字幕、總結和翻譯，或與 AI 助手開始對話
6. 用戶的問題經由 LangGraph 對話代理處理，代理基於向量數據庫中的內容提供回答
7. 對話歷史被維護，以提供連貫的會話體驗

## 擴展性和未來發展

- 支持批處理多個視頻
- 添加更多語言支持
- 集成語音輸入和輸出
- 添加視頻內容可視化功能
- 開發 API 以支持第三方集成
- 支持用戶自定義模型和參數
